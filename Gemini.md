# Aegis: AI驱动的JS逆向分析助手

## 核心理念

项目`Aegis`在`feature/js_re`分支上，已从一个通用的Web扫描器，被重构和聚焦为一个专业的、由AI驱动的“JavaScript逆向工程分析助手”。

其核心目标是：**辅助安全研究员和开发者，快速理解和破解复杂、混淆的前端JavaScript加密逻辑。**

## 最终架构：CDP调试器 + AI逆向专家

为了实现这一专注目标，整体架构被大幅简化，移除了所有与通用扫描、被动监听、状态化重放相关的复杂组件，只保留并强化了最核心的两个部分：

### 1. “外科手术式”的调试信息提取 (`CDPDebugger`)

这是工具的“眼睛”和“探针”。它不再笼统地监控用户的所有行为，而是通过Chrome开发工具协议（CDP）实现了一套更智能的断点机制。

- **动态断点**：`CDPDebugger`会自动在所有关键的交互事件（如`click`, `submit`, `change`）上设置断点。
- **上下文代码片段提取**：当用户操作触发了这些断点（例如，点击了一个加密按钮），`CDPDebugger`不会像之前一样抛出整个JS文件，而是以断点所在行为中心，**精确地截取一小段上下文代码**（如断点前后几十行）。
- **运行时变量捕获**：在截取代码的同时，它还会捕获断点暂停时，当前作用域内的所有变量及其值。

这种方式能确保我们提供给AI的是一段小范围、高价值、包含了执行现场的“第一手情报”。

### 2. “专注的AI逆向专家” (LLM as RE Expert)

这是工具的“大脑”。我们通过一个全新的、高度定制化的Prompt (`prompt.py`)，将AI的角色从一个泛泛的“安全分析师”转变为一个“JS逆向工程专家”。

- **新任务**：AI的新任务不再是评估风险或提出通用建议，而是：
  1.  **识别加密算法**：判断代码片段中使用了何种加密技术（AES, RSA, DES, MD5, etc.）。
  2.  **定位关键信息**：从代码和变量中，找出加密所使用的密钥（Key）、初始化向量（IV）、公钥等核心常量。
  3.  **解释加密流程**：用自然语言分步描述整个加密过程。

### 极简工作流

最终的工作流被简化为一条直线，高效且专注：

**用户操作 -> `CDPDebugger`捕获代码片段和变量 -> `InteractionWorker`调用AI -> 输出逆向分析结果**

这个架构彻底解决了之前版本中遇到的所有稳定性、复杂性和竞态条件问题，将项目的核心价值聚焦于一点，使其成为一个真正可用的专业辅助工具。